---
title: GRASP设计原则
category: 
- UML与模式
date: 2016-05-15
---


### 概述
GRASP(General Responsibility Assignment Software Patterns),GRASP定义了9中基本OO设计原则,它们描述了对象设计和职责分配的基本原则.
	
- 创建者(Creator)
- 信息专家(Information Expert)
- 低耦合(Low Coupling)
- 高内聚(Hight Cohesion)
- 控制器(Controller)
- 多态(Polymorphism)
- 间接性(Indirection)
- 纯虚构(Pure Fabrication)
- 防止变异(Protected Variation)

### 创建者
名称: 创建者   
问题: 谁创建A类的实例   
解决方案: 如果以下条件为真时候,由B类创建A类实例 

 - B包含或组成聚集了A
 - B记录A
 - B密切的使用A
 - B具有A的初始化数据
 
### 信息专家
 
 名称: 信息专家   
 问题: 给对象分配职责的基本原则是什么
 解决方案: 把职责分配给具有完成该职责所需信息的那个类
 
### 低耦合  

耦合是指元素与其他元素的依赖程度的度量.如果存在依赖,那么当被依赖元素发生变化,则依赖者也会受到影响.  
名称: 低耦合  
问题: 如何减少因变化产生的影响  
解决方案: 分配职责使不必要的耦合保持在较低的水平. 用该原则来评估现有设计或者评估新方案.  

> **Notice:** 高耦合本身不是问题所在,问题是与某些方面不稳定的元素直接的耦合,这些方面包括接口,实现等.

###高内聚

内聚是软件设计中的一种基本品质,内聚可以非正式地用于度量软件元素操作在功能上的相关性,也可以用于度量软件元素完成的工作量.
代码的数量及其相关性都是对象内聚程度指示器.代码量过多的类或许需要与过多的类进行交互,导致了低内聚.    
问题: 怎样保持对象是有重点的,可理解的,可管理的,并且能够支持低耦合  
解决方案: 分配职责可保持较高的内聚性. 内聚性较低的类要做许多互不相关的工作,或者需要完成大量的工作,这样的类是不合理的,它们会导致以下问题:  
 
 - 难以理解
 - 难以维护
 - 脆弱,经常会受到变化的影响    
 
内聚低的类通常表示大粒度的抽象,或者承担了本应委托给其他对象的职责.

其中与耦合和内聚关系紧密的另一个原则是模块化设计
> 模块化设计是讲系统分解成一组内聚的,松耦合的模块的特性

[Android模块化1](http://www.myexception.cn/android/1457815.html])
[Android模块化2](http://www.myexception.cn/android/1458971.html)
[Android模块化3](http://www.myexception.cn/android/1460152.html)
[Android模块化4](http://www.myexception.cn/android/1464979.html)

### 控制器

名称: 控制器   
问题: 在UI层之上首先接受和协调系统操作的对象是什么    
解决方案: 把职责分配给能代表下列选择之一的对象:   

 - 代表全部"系统","根对象",运行软件的设备或者主要的子系统  
 -  代表发生系统操作的用例场景(...session或者..handler)  
 
 控制器常见的阙下是分配的职责过多.这时候,控制器会具有不良内聚,从而违反了高内聚原则.
 
>  **准则:** 一般情况下,控制器应该把需要完成的工作委派给其他的对象.控制器只是协调或者控制这些活动,本身并不完成大量的工作.

代表整个系统,装置或者子系统的外观控制器.这种情况是在没有"过多"的系统事件,或者用户界面不能把系统事件消息重定向到其他控制器时选择外观控制器是合适的.

使用用例控制器,当把职责分配给外观控制器时会导致低内聚和高耦合的设计时,通着是当外观控制器的职责过多而变的"臃肿"时候,就需要考虑使用用例控制器.

 
 
### 多态
 
 名称: 多态   
 问题:  如何处理基于类型的选择,如何创建可插拔的软件构件?   
  
  - 基于类型的选择 : 条件变化是程序的一个基本主题. 如果使用if-else或者case语句的条件逻辑来设计程序,那么当出现新的变化时候,需要条件逻辑.这种方法很难扩展有新
  - 可插拔软件构件 : 客户-服务器关系中的,如何替换服务器构件,而不对客户端产生影响?   
  
 解决方案:  当相关的选择或者行为随类有所不同时,使用多态的来为类分配职责,不要测试对象的类型,也不要使用条件逻辑来执行基于类型的不同选择.
 
### 纯虚构  
 
名称: 纯虚构  
问题 : 当你并不想违背高内聚和低耦合,但是基于信息专家所提供的方案又不适合时,那些对象应该承诺这一职责呢?  
解决方案: 对人为制造的类分配一组高内聚的职责,该类并不代表实际问题概念,而是虚构的事物,用以支持高内聚,低耦合和复用.  

### 间接性

名称: 间接性   
问题: 为了避免两个或多个事物之间直接耦合,应该如何分配职责?如何使对象解耦,以支持低耦合并提高服用性潜力?    
解决方案: 讲职责分配给中介对象,是其作为其他构件或者服务之间的媒介,以避免它们之间的直接耦合.中介实现了其他构件之间的间接性.     

###  防止变异(PV)

名称: 防止变异
问题: 如何设计对象,子系统,系统,使其内部不会对其他元素产生不良影响?
解决方案: 识别预计变化或不稳定之处,分配职责用以在这些变化之外创建稳定接口.

得墨忒耳定律其含义就是不要远距离的对象结构路径去向远距离的间接随想发送消息,应该避免这种设计.
只应该给以下的对象发送消息:  
- this对象
- 方法的参数
- this的属性
- 作为this属性的集合中的元素
- 在方法中创建的对象

```
public void doX() {
	foo.getA().getB()...;
}
```

开放-封闭原则(OCP)

模块应该同时(对扩展,可适应性)开放和(对影响客户的更改)封闭
OCP和PV同一原则的不同的表示.
 
 

 
	
	

